{"ast":null,"code":"var _jsxFileName = \"C:\\\\audi_\\\\ESPL_projects\\\\facebook\\\\src\\\\components\\\\watermarks\\\\fixedImg.js\";\nimport React, { Component } from 'react';\nimport demoImg from \"../../assets/ntr5.jpg\"; // import waterMark from \"../../assets/resize_logo.png\";\n\nimport waterMark from \"../../assets/box.jpg\";\nimport \"./index.css\";\n\nconst interact = require('interactjs');\n\nclass WatermarkPosition extends Component {\n  constructor(props) {\n    super(props);\n\n    this.roateText = () => {\n      console.log(\"roatate text angle\", this.state.textRotatation);\n      let watermarkTextEle = document.getElementById('watermarkText');\n      console.log(\"ele\", watermarkTextEle);\n      let oldStyle = watermarkTextEle.style;\n      let oldTransform = oldStyle.transform;\n      let splitTranslate = oldTransform.split(\"rotate\");\n      let rotatedTransform = splitTranslate[1].replace(new RegExp(\"[0-9]\"), this.state.textRotatation);\n      console.log(splitTranslate, rotatedTransform);\n      let newTransform = `${splitTranslate[0]} rotate${rotatedTransform}}`;\n      console.log(newTransform); // translate(266px, 135px) rotate(0deg);\n\n      console.log(\"ele\", oldTransform); // document.getElementById(\"watermarkText\").style.transform = newAngle;\n      // transform: translate(321px, 122px) rotate(23deg);\n      // transform: translate(321px, 122px) rotate(23deg);\n      // element.setAttribute(\"style\", \"background-color: red;\");\n    };\n\n    this.textOpacityHandler = e => {\n      this.setState({\n        opacity: e.target.value\n      });\n    };\n\n    this.logoOpacityHandler = e => {\n      this.setState({\n        logoOpacity: e.target.value\n      });\n    };\n\n    this.FontHandler = e => {\n      console.log(e.target.value);\n      this.setState({\n        fontSize: e.target.value\n      });\n      console.log(this.state);\n    };\n\n    this.handleChange = event => {\n      console.log(event.target.files[0]);\n      this.setState({\n        file: URL.createObjectURL(event.target.files[0])\n      });\n    };\n\n    this.handleLogoFile = event => {\n      console.log(event.target.files[0]);\n      this.setState({\n        logoFile: URL.createObjectURL(event.target.files[0])\n      });\n    };\n\n    this.handleChangeText = e => {\n      this.setState({\n        watermarkText: e.target.value\n      });\n    };\n\n    this.addFont = () => {\n      this.setState({\n        fontSize: this.state.fontSize + 1\n      });\n    };\n\n    this.removeFont = () => {\n      this.setState({\n        fontSize: this.state.fontSize - 1\n      });\n    };\n\n    this.increaseLogo = () => {\n      this.setState({\n        logoSize: this.state.logoSize + 5\n      });\n    };\n\n    this.reduceLogo = () => {\n      this.setState({\n        logoSize: this.state.logoSize - 5\n      });\n    };\n\n    this.saveImg = () => {\n      // let waterMarkText = document.getElementById('watermarkText');\n      // console.log(waterMarkText.style.transform);\n      let watermarkLogo = document.getElementById('watermarkLogo');\n      console.log(`logo movement : ${watermarkLogo.style.transform}`); // er -40\n      // let movement = watermarkLogo.style.transform.split(\",\");\n      // let positiveX = !movement[0].includes(\"-\");\n      // let positiveY = !movement[1].includes(\"-\");\n      // let xMove = parseInt(movement[0].replace(/\\D/g, \"\"), 10);\n      // xMove = positiveX ? xMove * 1 : xMove * -1;\n      // let yMove = parseInt(movement[1].replace(/\\D/g, \"\"), 10);\n      // yMove = positiveY ? yMove * 1 : yMove * -1;\n      // yMove = yMove + 23;\n      // console.log(`logo movement : xMove = ${xMove}, yMove=${yMove}`);  // er -40\n\n      let watermarkLogoImg = document.getElementById('watermarkLogoImg');\n      let logoH = parseFloat(watermarkLogoImg.style.height);\n      let logoW = parseFloat(watermarkLogoImg.style.width);\n      console.log(watermarkLogoImg);\n      console.log(` Logo width  : ${logoW} - Logo height : ${logoH} - logo opacity : ${this.state.logoOpacity}`); // er -40\n      // let originalImgWidth = 1000;\n      // let originalImgHight = 667;\n      // let userImg = originalImgWidth > originalImgHight ? \"W\" : \"H\";\n      // let aspectRation = userImg == \"W\" ? originalImgWidth / 1000 : originalImgHight / 600;\n      // let nLogoWidth = originalImgWidth * logoW / 800;\n      // let nLogoHeight = originalImgHight * logoH / 533.6;\n      // let nLogoOriginX = xMove * originalImgWidth / 800;\n      // let nLogoOriginY = yMove * originalImgHight / 533.6;\n      // console.log(aspectRation);\n      // console.log(userImg);\n      // console.log(`final logo movement : xMove = ${xMove * aspectRation}, yMove=${yMove * aspectRation}`);\n      // console.log(`final Logo width : ${logoW * aspectRation} - final Logo height : ${logoH * aspectRation} - logo opacity : ${this.state.logoOpacity}`);\n      // let url = `ffmpeg -i ntr5.jpg -i logo3.jpg -filter_complex \"[1]scale=${nLogoWidth}:${nLogoHeight}[a];[a]lut=a=val*0.9[b];[0][b] overlay=${nLogoOriginX}:${nLogoOriginY}\" -y watermarkLogo.jpg`\n      // // scale => width and h of logo \n      // // overlay => x y start position \n      // console.log(url);\n    };\n\n    this.objectMoment = xyMove => {\n      if (xyMove) {\n        let movement = xyMove.split(\",\");\n        let positiveX = !movement[0].includes(\"-\");\n        let positiveY = !movement[1].includes(\"-\");\n        let xMove = parseInt(movement[0].replace(/\\D/g, \"\"), 10);\n        xMove = positiveX ? xMove * 1 : xMove * -1;\n        let yMove = parseInt(movement[1].replace(/\\D/g, \"\"), 10);\n        yMove = positiveY ? yMove * 1 : yMove * -1;\n        return {\n          xMove,\n          yMove\n        };\n      }\n    };\n\n    this.checkImg = () => {\n      console.log(\"final State\", this.state); // original img height and width\n      // let originalCoverW = 1000; \n      // let originalCoverH = 750;\n\n      let originalCoverW = this.state.actualImgWidth;\n      let originalCoverH = this.state.actualImgHeight; // bg img wh  --> preivew img height widht \n\n      let cover = document.querySelector(\"#cover\");\n      let pervieCoverW = cover.clientWidth;\n      let pervieCoverH = cover.clientHeight; // logo w h  ==> logo height and width on preview img \n\n      let wmLogoImg = document.querySelector(\"#watermarkLogo\");\n      let wmLogoImgcurrWidth = wmLogoImg.clientWidth;\n      let wmLogoImgcurrHeight = wmLogoImg.clientHeight - 4;\n      console.log(\"details- \");\n      console.log(\"original w-h- \", originalCoverW, originalCoverH);\n      console.log(\"preview w-h- \", pervieCoverW, pervieCoverH);\n      console.log(\"logo preivew w-h- \", wmLogoImgcurrWidth, wmLogoImgcurrHeight); // for watermark text \n\n      let waterMarkText = document.getElementById('watermarkText');\n      console.log(waterMarkText.style.transform);\n      let watermarkLogo = document.getElementById('watermarkLogo');\n      let xyMovesLogo = this.objectMoment(watermarkLogo.style.transform);\n      let xyMovesText = this.objectMoment(waterMarkText.style.transform);\n      console.log(\"logo\", xyMovesLogo, \"txt\", xyMovesText); // distance  x y \n\n      let aspRatiobyW = originalCoverW / pervieCoverW; // by width \n\n      let aspRatiobyH = originalCoverH / pervieCoverH; // by h\n      // xy on original img \n\n      let finalX = aspRatiobyW * xyMovesLogo.xMove;\n      let finalY = aspRatiobyH * xyMovesLogo.yMove;\n      let fW = wmLogoImgcurrWidth * aspRatiobyW;\n      let fH = wmLogoImgcurrHeight * aspRatiobyH;\n      let finalTextX = aspRatiobyW * xyMovesText.xMove;\n      let finalTextY = aspRatiobyH * xyMovesText.yMove + 0.018 * pervieCoverH; // 0.018 y move per 1px \n\n      let textFper = this.state.fontSize / pervieCoverW * 100;\n      let finalTextF = textFper * originalCoverW / 100;\n      let url = `ffmpeg -i gridOrg.jpg -i box.jpg -filter_complex \"[1]scale=${fW}:${fH}[a];[a]lut=a=val*0.9[b];[0][b] overlay=${finalX}:${finalY}\" -y watermarkLogo.jpg`;\n      let txtUrl = `ffmpeg -i gridOrg1.jpg -filter_complex \"[0]drawtext=fontfile=cour.ttf:text='${this.state.watermarkText}':fontcolor=${this.state.fontColor}:fontsize=${finalTextF}:x=${finalTextX}:y=${finalTextY}\" -y restextWatermark.jpg`; // console.log(txtUrl);\n\n      let urlTextLogo = `ffmpeg -i gridOrg.jpg -i box.jpg -filter_complex \"[1]scale=${fW}:${fH}[t],[t]lut=a=val*0.${this.state.logoOpacity}[t],[t]rotate=0*PI/180[t],[0][t]overlay=${finalX}:${finalY}[i1];[i1]drawtext=fontfile='cour.ttf': text='${this.state.watermarkText}':fontcolor=${this.state.fontColor}@0.${this.state.opacity}:fontsize=${finalTextF}:x=${finalTextX}:y=${finalTextY}\" -y res_logoText.jpg`;\n      console.log(urlTextLogo);\n    };\n\n    this.getLogos = () => {\n      // let textStyle = {\n      //     background: \"red\",\n      //     fontSize: this.state.fontSize,\n      //     opacity: `0.${this.state.opacity}`,\n      //     fontFamily: \"Courier New\"\n      // }\n      let logoStyle = {\n        width: this.state.logoSize,\n        opacity: `0.${this.state.logoOpacity}`\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      });\n    };\n\n    this.state = {\n      fontSize: 20,\n      fontColor: \"red\",\n      rotate: 20,\n      textRotatation: 0,\n      logoRoatation: 0,\n      opacity: 9,\n      logoOpacity: 9,\n      logoSize: 80,\n      watermarkText: \"Â© free style\",\n      BackgroundImgUrl: \"\",\n      file: \"\",\n      logoFile: \"\",\n      // image parameters\n      actualImgWidth: 1000,\n      actualImgHeight: 750\n    };\n  }\n\n  componentDidMount() {\n    let vm = this.state; // drag the element on page \n\n    const position = {\n      x: 0,\n      y: 0\n    };\n    interact('.draggable-logo').draggable({\n      listeners: {\n        start(event) {// console.log(event.type, event.target)\n        },\n\n        move(event) {\n          position.x += event.dx;\n          position.y += event.dy;\n          event.target.style.transform = `translate(${position.x}px, ${position.y}px)`;\n          console.log(event.type, event.target);\n        }\n\n      }\n    }); // resize the element \n\n    interact(\".resizable-logo\").resizable({\n      edges: {\n        left: false,\n        right: true,\n        bottom: true,\n        top: false\n      },\n      // modifiers: [\n      //   interact.modifiers.restrictEdges({\n      //     outer: \"parent\",\n      //     endOnly: true\n      //   })\n      // ],\n      inertia: true,\n      modifiers: [// keep the edges inside the parent\n      // interact.modifiers.restrictEdges({\n      //   outer: 'parent'\n      // }),\n      // minimum size\n      interact.modifiers.restrictSize({\n        min: {\n          width: 20,\n          height: 20\n        }\n      })]\n    }).on(\"resizemove\", function (event) {\n      var target = event.target;\n      console.log(target);\n      target.style.width = event.rect.width + \"px\";\n      target.style.height = event.rect.height + \"px\";\n    }); // text drag(move)\n\n    interact('.draggable-text').draggable({\n      listeners: {\n        start(event) {\n          console.log(vm);\n        },\n\n        move(event) {\n          position.x += event.dx;\n          position.y += event.dy;\n          console.log(event.target.style);\n          event.target.style.transform = `translate(${position.x}px, ${position.y}px) rotate(${vm.textRotatation}deg) `;\n        }\n\n      }\n    }); // resize the element \n    // interact(\".resizable-text\")\n    // .resizable({\n    //         edges: { left: false, right: true, bottom: true, top: false },\n    //         // modifiers: [\n    //         //   interact.modifiers.restrictEdges({\n    //         //     outer: \"parent\",\n    //         //     endOnly: true\n    //         //   })\n    //         // ],\n    //         inertia: true\n    //     })\n    //     .on(\"resizemove\", function(event) {\n    //         var target = event.target\n    //         console.log(event);\n    //         target.style.width = event.rect.width + \"px\"\n    //         target.style.height = event.rect.height + \"px\"\n    //     })\n  }\n\n  render() {\n    let logoStyle = {\n      width: this.state.logoSize,\n      opacity: `0.${this.state.logoOpacity}`\n    };\n    let editorConsole = {\n      position: \"relative\",\n      backgroundImage: `url(${this.state.file})`,\n      width: \"500px\",\n      height: \"375px\"\n    };\n    let textStyle = {\n      // background: \"red\",\n      fontSize: this.state.fontSize,\n      opacity: `0.${this.state.opacity}`,\n      fontFamily: \"Courier New\",\n      position: \"absolute\",\n      color: this.state.fontColor,\n      transform: \"rotate(0deg)\"\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, \"User inputs \"), \"text Opacity : \", React.createElement(\"input\", {\n      type: \"range\",\n      name: \"points\",\n      min: \"0\",\n      max: \"9\",\n      onChange: e => this.textOpacityHandler(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }), \"Logo Opacity : \", React.createElement(\"input\", {\n      type: \"range\",\n      name: \"logoOpacity\",\n      min: \"0\",\n      max: \"9\",\n      onChange: e => this.logoOpacityHandler(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }), \"cover: \", React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }), \"logo : \", React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleLogoFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }), \"text : \", React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.watermarkText,\n      onChange: e => this.handleChangeText(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }), \"textRotate \", React.createElement(\"input\", {\n      type: \"number\",\n      onChange: e => this.setState({\n        textRotatation: parseInt(e.target.value, 10)\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.roateText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }, \"Rotate\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.addFont(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, \"Font++\"), React.createElement(\"button\", {\n      onClick: () => this.removeFont(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }, \"Font --\"), React.createElement(\"button\", {\n      onClick: () => this.increaseLogo(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }, \" logo ++\"), React.createElement(\"button\", {\n      onClick: () => this.reduceLogo(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, \" logo -- \"), React.createElement(\"button\", {\n      onClick: () => this.checkImg(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, \" check Img\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"watermark-playground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"editor-console\",\n      id: \"cover\",\n      style: editorConsole,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"draggable-logo\",\n      id: \"watermarkLogo\",\n      style: {\n        position: \"absolute\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.logoFile,\n      id: \"watermarkLogoImg\",\n      style: logoStyle,\n      className: \"resizable-logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"draggable-text\",\n      id: \"watermarkText\",\n      style: textStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, this.state.watermarkText))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default WatermarkPosition;","map":{"version":3,"sources":["C:/audi_/ESPL_projects/facebook/src/components/watermarks/fixedImg.js"],"names":["React","Component","demoImg","waterMark","interact","require","WatermarkPosition","constructor","props","roateText","console","log","state","textRotatation","watermarkTextEle","document","getElementById","oldStyle","style","oldTransform","transform","splitTranslate","split","rotatedTransform","replace","RegExp","newTransform","textOpacityHandler","e","setState","opacity","target","value","logoOpacityHandler","logoOpacity","FontHandler","fontSize","handleChange","event","files","file","URL","createObjectURL","handleLogoFile","logoFile","handleChangeText","watermarkText","addFont","removeFont","increaseLogo","logoSize","reduceLogo","saveImg","watermarkLogo","watermarkLogoImg","logoH","parseFloat","height","logoW","width","objectMoment","xyMove","movement","positiveX","includes","positiveY","xMove","parseInt","yMove","checkImg","originalCoverW","actualImgWidth","originalCoverH","actualImgHeight","cover","querySelector","pervieCoverW","clientWidth","pervieCoverH","clientHeight","wmLogoImg","wmLogoImgcurrWidth","wmLogoImgcurrHeight","waterMarkText","xyMovesLogo","xyMovesText","aspRatiobyW","aspRatiobyH","finalX","finalY","fW","fH","finalTextX","finalTextY","textFper","finalTextF","url","txtUrl","fontColor","urlTextLogo","getLogos","logoStyle","rotate","logoRoatation","BackgroundImgUrl","componentDidMount","vm","position","x","y","draggable","listeners","start","move","dx","dy","type","resizable","edges","left","right","bottom","top","inertia","modifiers","restrictSize","min","on","rect","render","editorConsole","backgroundImage","textStyle","fontFamily","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport demoImg from \"../../assets/ntr5.jpg\";\r\n// import waterMark from \"../../assets/resize_logo.png\";\r\n\r\nimport waterMark from \"../../assets/box.jpg\";\r\n\r\nimport \"./index.css\";\r\nconst interact = require('interactjs')\r\n\r\n\r\n\r\nclass WatermarkPosition extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            fontSize: 20,\r\n            fontColor : \"red\",\r\n            rotate: 20,\r\n            textRotatation: 0,\r\n            logoRoatation:0,\r\n            opacity: 9,\r\n            logoOpacity: 9,\r\n            logoSize: 80,\r\n            watermarkText: \"Â© free style\",\r\n            BackgroundImgUrl: \"\",\r\n            file: \"\",\r\n            logoFile : \"\",\r\n\r\n            // image parameters\r\n            actualImgWidth : 1000,\r\n            actualImgHeight  : 750\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let vm = this.state;\r\n\r\n        // drag the element on page \r\n        const position = { x: 0, y: 0 }\r\n        interact('.draggable-logo').draggable({\r\n            listeners: {\r\n                start(event) {\r\n                    // console.log(event.type, event.target)\r\n                },\r\n                move(event) {\r\n                    position.x += event.dx\r\n                    position.y += event.dy\r\n\r\n                    event.target.style.transform =\r\n                        `translate(${position.x}px, ${position.y}px)`\r\n\r\n                    console.log(event.type, event.target)\r\n                },\r\n\r\n            }\r\n        })\r\n\r\n        // resize the element \r\n        interact(\".resizable-logo\")\r\n            .resizable({\r\n                edges: { left: false, right: true, bottom: true, top: false },\r\n                // modifiers: [\r\n                //   interact.modifiers.restrictEdges({\r\n                //     outer: \"parent\",\r\n                //     endOnly: true\r\n                //   })\r\n                // ],\r\n                inertia: true,\r\n                modifiers: [\r\n                    // keep the edges inside the parent\r\n                    // interact.modifiers.restrictEdges({\r\n                    //   outer: 'parent'\r\n                    // }),\r\n\r\n                    // minimum size\r\n                    interact.modifiers.restrictSize({\r\n                        min: { width: 20, height: 20 }\r\n                    })\r\n                ],\r\n            })\r\n            .on(\"resizemove\", function (event) {\r\n                var target = event.target\r\n                console.log(target);\r\n                target.style.width = event.rect.width + \"px\"\r\n                target.style.height = event.rect.height + \"px\"\r\n            })\r\n\r\n\r\n        // text drag(move)\r\n        interact('.draggable-text').draggable({\r\n            listeners: {\r\n                start(event) {\r\n\r\n                    console.log(vm);\r\n                },\r\n                move(event) {\r\n                    position.x += event.dx\r\n                    position.y += event.dy\r\n                    console.log(event.target.style);\r\n                    event.target.style.transform =\r\n                        `translate(${position.x}px, ${position.y}px) rotate(${vm.textRotatation}deg) `\r\n                },\r\n\r\n            }\r\n        })\r\n\r\n        // resize the element \r\n        // interact(\".resizable-text\")\r\n        // .resizable({\r\n        //         edges: { left: false, right: true, bottom: true, top: false },\r\n        //         // modifiers: [\r\n        //         //   interact.modifiers.restrictEdges({\r\n        //         //     outer: \"parent\",\r\n        //         //     endOnly: true\r\n        //         //   })\r\n        //         // ],\r\n        //         inertia: true\r\n        //     })\r\n        //     .on(\"resizemove\", function(event) {\r\n        //         var target = event.target\r\n        //         console.log(event);\r\n        //         target.style.width = event.rect.width + \"px\"\r\n        //         target.style.height = event.rect.height + \"px\"\r\n        //     })\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    roateText = () =>{\r\n\r\n        console.log(\"roatate text angle\" , this.state.textRotatation);\r\n\r\n        let watermarkTextEle = document.getElementById('watermarkText');\r\n        console.log(\"ele\" , watermarkTextEle);\r\n\r\n        let oldStyle = watermarkTextEle.style;\r\n        let oldTransform = oldStyle.transform;\r\n\r\n        let splitTranslate = oldTransform.split(\"rotate\");\r\n       \r\n        let rotatedTransform =  splitTranslate[1].replace(new RegExp(\"[0-9]\"), this.state.textRotatation);\r\n        console.log(splitTranslate , rotatedTransform);\r\n        let newTransform = `${splitTranslate[0]} rotate${rotatedTransform}}`\r\n\r\n        console.log(newTransform);\r\n\r\n        // translate(266px, 135px) rotate(0deg);\r\n\r\n        console.log(\"ele\" , oldTransform);\r\n    \r\n\r\n        // document.getElementById(\"watermarkText\").style.transform = newAngle;\r\n\r\n\r\n        // transform: translate(321px, 122px) rotate(23deg);\r\n\r\n        // transform: translate(321px, 122px) rotate(23deg);\r\n\r\n        // element.setAttribute(\"style\", \"background-color: red;\");\r\n    }\r\n\r\n    // opacityRange \r\n\r\n    textOpacityHandler = (e) => {\r\n        this.setState({\r\n            opacity : e.target.value\r\n        })\r\n    }\r\n\r\n    logoOpacityHandler = (e) => {\r\n        this.setState({\r\n            logoOpacity: e.target.value\r\n        })\r\n    }\r\n\r\n    FontHandler = (e) =>{  \r\n        console.log(e.target.value);\r\n        this.setState({\r\n            fontSize : e.target.value\r\n        })\r\n\r\n        console.log(this.state);\r\n    }\r\n\r\n\r\n    handleChange = (event) => {\r\n        console.log(event.target.files[0]);\r\n        this.setState({\r\n            file: URL.createObjectURL(event.target.files[0])\r\n        })\r\n    }\r\n\r\n    \r\n    handleLogoFile = (event) => {\r\n        console.log(event.target.files[0]);\r\n        this.setState({\r\n            logoFile : URL.createObjectURL(event.target.files[0])\r\n        })\r\n    }\r\n\r\n\r\n    handleChangeText = (e) => {\r\n        this.setState(\r\n            { watermarkText : e.target.value}\r\n        )\r\n    }\r\n\r\n    addFont = () => {\r\n        this.setState({\r\n            fontSize: this.state.fontSize + 1\r\n        })\r\n    }\r\n\r\n    removeFont = () => {\r\n        this.setState({\r\n            fontSize: this.state.fontSize - 1\r\n        })\r\n    }\r\n\r\n    increaseLogo = () => {\r\n        this.setState({\r\n            logoSize: this.state.logoSize + 5\r\n        })\r\n    }\r\n\r\n    reduceLogo = () => {\r\n\r\n        this.setState({\r\n            logoSize: this.state.logoSize - 5\r\n        })\r\n    }\r\n\r\n\r\n    saveImg = () => {\r\n\r\n        // let waterMarkText = document.getElementById('watermarkText');\r\n        // console.log(waterMarkText.style.transform);\r\n\r\n        let watermarkLogo = document.getElementById('watermarkLogo');\r\n\r\n        console.log(`logo movement : ${watermarkLogo.style.transform}`);  // er -40\r\n\r\n        // let movement = watermarkLogo.style.transform.split(\",\");\r\n\r\n        // let positiveX = !movement[0].includes(\"-\");\r\n        // let positiveY = !movement[1].includes(\"-\");\r\n        // let xMove = parseInt(movement[0].replace(/\\D/g, \"\"), 10);\r\n        // xMove = positiveX ? xMove * 1 : xMove * -1;\r\n        // let yMove = parseInt(movement[1].replace(/\\D/g, \"\"), 10);\r\n        // yMove = positiveY ? yMove * 1 : yMove * -1;\r\n        // yMove = yMove + 23;\r\n        // console.log(`logo movement : xMove = ${xMove}, yMove=${yMove}`);  // er -40\r\n\r\n        let watermarkLogoImg = document.getElementById('watermarkLogoImg');\r\n        let logoH = parseFloat(watermarkLogoImg.style.height);\r\n        let logoW = parseFloat(watermarkLogoImg.style.width);\r\n\r\n        console.log(watermarkLogoImg);\r\n\r\n         console.log(` Logo width  : ${logoW} - Logo height : ${logoH} - logo opacity : ${this.state.logoOpacity}`);  // er -40\r\n\r\n\r\n        // let originalImgWidth = 1000;\r\n        // let originalImgHight = 667;\r\n\r\n        // let userImg = originalImgWidth > originalImgHight ? \"W\" : \"H\";\r\n        // let aspectRation = userImg == \"W\" ? originalImgWidth / 1000 : originalImgHight / 600;\r\n\r\n\r\n        // let nLogoWidth = originalImgWidth * logoW / 800;\r\n        // let nLogoHeight = originalImgHight * logoH / 533.6;\r\n\r\n        // let nLogoOriginX = xMove * originalImgWidth / 800;\r\n        // let nLogoOriginY = yMove * originalImgHight / 533.6;\r\n\r\n\r\n        // console.log(aspectRation);\r\n        // console.log(userImg);\r\n\r\n        // console.log(`final logo movement : xMove = ${xMove * aspectRation}, yMove=${yMove * aspectRation}`);\r\n        // console.log(`final Logo width : ${logoW * aspectRation} - final Logo height : ${logoH * aspectRation} - logo opacity : ${this.state.logoOpacity}`);\r\n\r\n        // let url = `ffmpeg -i ntr5.jpg -i logo3.jpg -filter_complex \"[1]scale=${nLogoWidth}:${nLogoHeight}[a];[a]lut=a=val*0.9[b];[0][b] overlay=${nLogoOriginX}:${nLogoOriginY}\" -y watermarkLogo.jpg`\r\n        // // scale => width and h of logo \r\n        // // overlay => x y start position \r\n        // console.log(url);\r\n    }\r\n\r\n    objectMoment = (xyMove) => {\r\n\r\n\r\n        if(xyMove){\r\n      \r\n        let movement = xyMove.split(\",\");\r\n        let positiveX = !movement[0].includes(\"-\");\r\n        let positiveY = !movement[1].includes(\"-\");\r\n        let xMove = parseInt(movement[0].replace(/\\D/g, \"\"), 10);\r\n              xMove = positiveX ? xMove * 1 : xMove * -1;\r\n        let yMove = parseInt(movement[1].replace(/\\D/g, \"\"), 10);\r\n                yMove = positiveY ? yMove * 1 : yMove * -1;\r\n\r\n                return {\r\n                    xMove,\r\n                    yMove\r\n                }\r\n\r\n            }\r\n    }\r\n\r\n\r\n    checkImg = () => {\r\n\r\n        console.log(\"final State\", this.state);\r\n\r\n        // original img height and width\r\n        // let originalCoverW = 1000; \r\n        // let originalCoverH = 750;\r\n\r\n        let originalCoverW = this.state.actualImgWidth; \r\n        let originalCoverH = this.state.actualImgHeight;\r\n\r\n        // bg img wh  --> preivew img height widht \r\n        let cover = document.querySelector(\"#cover\");\r\n        let pervieCoverW = cover.clientWidth;\r\n        let pervieCoverH = cover.clientHeight;\r\n\r\n        // logo w h  ==> logo height and width on preview img \r\n        let wmLogoImg = document.querySelector(\"#watermarkLogo\");\r\n        let wmLogoImgcurrWidth = wmLogoImg.clientWidth;\r\n        let wmLogoImgcurrHeight = wmLogoImg.clientHeight - 4;\r\n\r\n        console.log(\"details- \" );\r\n        console.log(\"original w-h- \" ,originalCoverW , originalCoverH );\r\n        console.log(\"preview w-h- \" ,pervieCoverW , pervieCoverH );\r\n        console.log(\"logo preivew w-h- \" ,wmLogoImgcurrWidth , wmLogoImgcurrHeight );\r\n\r\n\r\n        // for watermark text \r\n        let waterMarkText = document.getElementById('watermarkText');\r\n        console.log(waterMarkText.style.transform);\r\n\r\n        let watermarkLogo = document.getElementById('watermarkLogo');\r\n\r\n        let xyMovesLogo =  this.objectMoment(watermarkLogo.style.transform);\r\n        let xyMovesText =  this.objectMoment(waterMarkText.style.transform);\r\n                \r\n\r\n         console.log( \"logo\" ,xyMovesLogo , \"txt\" , xyMovesText); \r\n        \r\n        // distance  x y \r\n        let aspRatiobyW = originalCoverW /pervieCoverW ;  // by width \r\n        let aspRatiobyH = originalCoverH/pervieCoverH ; // by h\r\n\r\n        // xy on original img \r\n          let finalX = aspRatiobyW *  xyMovesLogo.xMove;  \r\n          let finalY = aspRatiobyH *  xyMovesLogo.yMove ;\r\n\r\n         let fW = wmLogoImgcurrWidth * aspRatiobyW;\r\n         let fH = wmLogoImgcurrHeight * aspRatiobyH;\r\n\r\n         let finalTextX = aspRatiobyW *  xyMovesText.xMove;  \r\n         let finalTextY =aspRatiobyH * xyMovesText.yMove + (0.018 * pervieCoverH); // 0.018 y move per 1px \r\n\r\n\r\n         let textFper = (this.state.fontSize / pervieCoverW)*100;\r\n         let finalTextF = (textFper * originalCoverW)/100 ; \r\n\r\n\r\n         let url = `ffmpeg -i gridOrg.jpg -i box.jpg -filter_complex \"[1]scale=${fW}:${fH}[a];[a]lut=a=val*0.9[b];[0][b] overlay=${finalX}:${finalY}\" -y watermarkLogo.jpg`\r\n         let txtUrl = `ffmpeg -i gridOrg1.jpg -filter_complex \"[0]drawtext=fontfile=cour.ttf:text='${this.state.watermarkText}':fontcolor=${this.state.fontColor}:fontsize=${finalTextF}:x=${finalTextX}:y=${finalTextY}\" -y restextWatermark.jpg`\r\n       \r\n            // console.log(txtUrl);\r\n\r\n\r\n         let urlTextLogo = `ffmpeg -i gridOrg.jpg -i box.jpg -filter_complex \"[1]scale=${fW}:${fH}[t],[t]lut=a=val*0.${this.state.logoOpacity}[t],[t]rotate=0*PI/180[t],[0][t]overlay=${finalX}:${finalY}[i1];[i1]drawtext=fontfile='cour.ttf': text='${this.state.watermarkText}':fontcolor=${this.state.fontColor}@0.${this.state.opacity}:fontsize=${finalTextF}:x=${finalTextX}:y=${finalTextY}\" -y res_logoText.jpg`;   \r\n         console.log(urlTextLogo);\r\n    }\r\n\r\n    getLogos = () => {\r\n\r\n        // let textStyle = {\r\n        //     background: \"red\",\r\n        //     fontSize: this.state.fontSize,\r\n        //     opacity: `0.${this.state.opacity}`,\r\n        //     fontFamily: \"Courier New\"\r\n        // }\r\n\r\n\r\n        let logoStyle = {\r\n            width: this.state.logoSize,\r\n            opacity: `0.${this.state.logoOpacity}`,\r\n        }\r\n\r\n\r\n        return <div>\r\n            {/* \r\n                       <div className=\"draggable-text\" id=\"watermarkText\" style={textStyle} >\r\n                            {this.state.watermarkText}\r\n                        </div> */}\r\n\r\n\r\n\r\n\r\n\r\n        </div>\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n\r\n        let logoStyle = {\r\n            width: this.state.logoSize,\r\n            opacity: `0.${this.state.logoOpacity}`,\r\n        }\r\n\r\n        let editorConsole = {\r\n            position: \"relative\",\r\n            backgroundImage: `url(${this.state.file})`,\r\n            width:  \"500px\" ,\r\n            height: \"375px\",\r\n        }\r\n\r\n        let textStyle = {\r\n            // background: \"red\",\r\n            fontSize: this.state.fontSize,\r\n            opacity: `0.${this.state.opacity}`,\r\n            fontFamily: \"Courier New\",\r\n            position :\"absolute\",\r\n            color : this.state.fontColor,\r\n            transform: \"rotate(0deg)\"\r\n        }\r\n\r\n        return (\r\n            <div>\r\n\r\n                <div>\r\n                    <h4>User inputs </h4>\r\n                        text Opacity : <input type=\"range\" name=\"points\" min=\"0\" max=\"9\" \r\n                            onChange={e => this.textOpacityHandler(e)} />\r\n                        {/* Font :  <input type=\"range\" name=\"font\" min={10} max={100} \r\n                            onChange={e => this.FontHandler(e)} /> */}\r\n                        Logo Opacity : <input type=\"range\" name=\"logoOpacity\" min=\"0\" max=\"9\" \r\n                                                onChange={e => this.logoOpacityHandler(e)} />\r\n\r\n                   cover: <input type=\"file\" onChange={this.handleChange} />\r\n                   logo : <input type=\"file\" onChange={this.handleLogoFile} /> \r\n                   text : <input type=\"text\" value={this.state.watermarkText} onChange={ e => this.handleChangeText(e)} />\r\n                   {/* logoRotate <input type=\"number\" onChange={ (e) => this.setState({ textRotatation : parseInt(e.target.value, 10)})} />  */}\r\n                   textRotate <input type=\"number\" onChange={ (e) => this.setState({ textRotatation : parseInt(e.target.value, 10)})} /> \r\n                   <button onClick={this.roateText}>Rotate</button>\r\n                </div>\r\n\r\n                <span>\r\n                    <button onClick={() => this.addFont()}>Font++</button>\r\n                    <button onClick={() => this.removeFont()}>Font --</button>\r\n                    <button onClick={() => this.increaseLogo()}> logo ++</button>\r\n                    <button onClick={() => this.reduceLogo()}> logo -- </button>\r\n                    {/* <button onClick={() => this.saveImg()}> Save Img</button> */}\r\n                    <button onClick={() => this.checkImg()}> check Img</button>\r\n\r\n                </span>\r\n                <hr />\r\n\r\n                <div className=\"watermark-playground\">\r\n\r\n                    <div className=\"editor-console\"\r\n                        id=\"cover\"\r\n                        style={editorConsole}\r\n                    >\r\n\r\n                        <div className=\"draggable-logo\" \r\n                          id=\"watermarkLogo\"\r\n                          style={{ position :\"absolute\"}} >\r\n                            <img src={this.state.logoFile}\r\n                                id=\"watermarkLogoImg\"\r\n                                style={logoStyle}\r\n\r\n                                className=\"resizable-logo\"\r\n                            />\r\n                        </div>\r\n\r\n\r\n                        <div className=\"draggable-text\"\r\n                                id=\"watermarkText\"\r\n                                 style={textStyle} >\r\n                            {this.state.watermarkText}\r\n                        </div>\r\n\r\n\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n<br />\r\n<br />\r\n<br />\r\n<br />\r\n<br />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default WatermarkPosition;"]},"metadata":{},"sourceType":"module"}